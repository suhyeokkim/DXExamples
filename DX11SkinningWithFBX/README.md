# DX11SkinningWithFBX

![gif](https://media.giphy.com/media/LLz2zsyX47XXLf7cEf/giphy.gif)

- FBX를 읽어오는 코드를 사용하여 버텍스 버퍼(위치, 노말, UV), 인덱스 버퍼를 생성 및 복사. 
- FBX를 읽어오는 코드를 사용하여 스켈레톤의 구조 및 바인드 포즈 정보와 테이크 별 스켈레탈 애니메이션을 위한 변환 정보를 불러옴.
- DX11ObjectWithFBX 에서는 간단하게 버퍼 두개를 사용하여 렌더링 했다면, 여기서는 처음에 정점 정보를 SRV로 참조하여 computeshader에서 계산하여 UAV로 저장하고, 이를 CopyResource 를 사용하여 버텍스 버퍼로 복사하여 렌더링함. 기존의 쉐이더 코드는 그대로 유지.(UAV와 버텍스 버퍼 동시에 사용이 안되어 이렇게 세팅)
- 애니메이션은 저장되어 있던 하나의 테이크를 처음부터 끝까지 computeShader에서 보여줌.

- 리소스를 하나로 묵음
- 파이프라인 의존성 데이터 및 실행기를 만들어 자동으로 리소스를 참조하여 처리
- 드로우 인스턴스를 사용자가 생성하여 이에서 리소스 및 의존성을 생성하여 처리 
- 파이프라인 하나의 분류를 dx12 처럼 copy, compute, draw 로 나눔. 
- 파이프라인 의존성 처리를 초기화, 리사이즈, 프레임별로 나누어 처리
- 리소스 로드 시 description 데이터 붙임과 인덱스 할당,  dx11 리소스 로드 부분을 나눔.

# TODO

- 데이터 로딩 굉장히 느림.
- TRS <-> Affine <-> DQ 계산 코드 추가 필요
- dqs, normal approximation, CRS 등 여러 방법 미구현
- 동적 인스턴스 데이터와 파일에서 읽어온 정적 데이터의 분리 필요(스키닝의 변환된 버텍스 UAV와 복사할 버텍스 버퍼)
- FBX 에서 추출한 정점과 스키닝 처리 후 정점의 위치가 다름.
- 정점 버퍼, 상수 버퍼, 타일드 리소스 및 텍스쳐 어레이로로 병합 및 + 의존성 병합
- 한번의 쉐이더 파라미터 설정시 하나 이상 설정 불가능
- Allocater 구현 미완성, Persistant Allocater 는 violent access 발생
- alloca, realloc 쓰는 구문 제거 혹은 치환 필요
